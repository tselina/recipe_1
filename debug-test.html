<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Test</title>
</head>
<body>
    <h1>Debug Test</h1>
    <div id="debug-output"></div>

    <!-- Load modules in correct order -->
    <script src="js/storage-manager.js"></script>
    <script src="js/data-models.js"></script>
    <script src="js/barcode-scanner.js"></script>
    <script src="js/product-database.js"></script>
    <script src="js/recipe-manager.js"></script>
    <script src="js/portion-calculator.js"></script>
    <script src="js/ui-controller.js"></script>
    <script src="js/app.js"></script>

    <script>
        function log(message) {
            const output = document.getElementById('debug-output');
            const div = document.createElement('div');
            div.textContent = message;
            output.appendChild(div);
            console.log(message);
        }

        // Check immediately after scripts load
        log('=== Immediate Check ===');
        log('StorageManager: ' + typeof StorageManager);
        log('Recipe: ' + typeof Recipe);
        log('window.Recipe: ' + typeof window.Recipe);
        log('Product: ' + typeof Product);
        log('window.Product: ' + typeof window.Product);
        log('ConsumptionResult: ' + typeof ConsumptionResult);
        log('window.ConsumptionResult: ' + typeof window.ConsumptionResult);
        log('RecipeManager: ' + typeof RecipeManager);
        log('PortionCalculator: ' + typeof PortionCalculator);
        log('ProductDatabase: ' + typeof ProductDatabase);
        log('UIController: ' + typeof UIController);
        log('BarcodeScanner: ' + typeof BarcodeScanner);

        // Check after a delay
        setTimeout(() => {
            log('=== After 100ms Delay ===');
            log('StorageManager: ' + typeof StorageManager);
            log('Recipe: ' + typeof Recipe);
            log('window.Recipe: ' + typeof window.Recipe);
            log('Product: ' + typeof Product);
            log('window.Product: ' + typeof window.Product);
            log('ConsumptionResult: ' + typeof ConsumptionResult);
            log('window.ConsumptionResult: ' + typeof window.ConsumptionResult);
            log('RecipeManager: ' + typeof RecipeManager);
            log('PortionCalculator: ' + typeof PortionCalculator);
            log('ProductDatabase: ' + typeof ProductDatabase);
            log('UIController: ' + typeof UIController);
            log('BarcodeScanner: ' + typeof BarcodeScanner);
        }, 100);

        // Check on DOM ready
        document.addEventListener('DOMContentLoaded', () => {
            log('=== On DOM Ready ===');
            log('StorageManager: ' + typeof StorageManager);
            log('Recipe: ' + typeof Recipe);
            log('window.Recipe: ' + typeof window.Recipe);
            log('Product: ' + typeof Product);
            log('window.Product: ' + typeof window.Product);
            log('ConsumptionResult: ' + typeof ConsumptionResult);
            log('window.ConsumptionResult: ' + typeof window.ConsumptionResult);
            log('RecipeManager: ' + typeof RecipeManager);
            log('PortionCalculator: ' + typeof PortionCalculator);
            log('ProductDatabase: ' + typeof ProductDatabase);
            log('UIController: ' + typeof UIController);
            log('BarcodeScanner: ' + typeof BarcodeScanner);
        });
    </script>
</body>
</html>