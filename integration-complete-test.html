<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Integration Test - Recipe Portion Tracker</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .test-result { margin: 10px 0; padding: 12px; border-radius: 6px; border-left: 4px solid; }
        .success { background-color: #d4edda; color: #155724; border-left-color: #28a745; }
        .error { background-color: #f8d7da; color: #721c24; border-left-color: #dc3545; }
        .info { background-color: #d1ecf1; color: #0c5460; border-left-color: #17a2b8; }
        .warning { background-color: #fff3cd; color: #856404; border-left-color: #ffc107; }
        pre { background: #f8f9fa; padding: 15px; border-radius: 4px; overflow-x: auto; font-size: 12px; }
        .loading { text-align: center; padding: 40px; color: #666; }
        .header { text-align: center; margin-bottom: 30px; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .stat-card { background: #f8f9fa; padding: 15px; border-radius: 6px; text-align: center; }
        .stat-number { font-size: 24px; font-weight: bold; color: #28a745; }
        .stat-label { color: #666; font-size: 14px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß™ Complete Integration Test</h1>
            <p>Recipe Portion Tracker - Full System Verification</p>
        </div>
        
        <div class="loading" id="loading">
            <div>‚è≥ Loading and testing all components...</div>
            <div style="margin-top: 10px; font-size: 14px; color: #888;">This may take a few seconds</div>
        </div>
        
        <div id="test-results" style="display: none;"></div>
        <div id="final-stats" style="display: none;"></div>
    </div>

    <!-- Load modules in correct order -->
    <script src="js/storage-manager.js"></script>
    <script src="js/data-models.js"></script>
    <script src="js/barcode-scanner.js"></script>
    <script src="js/barcode-generator.js"></script>
    <script src="js/product-database.js"></script>
    <script src="js/recipe-manager.js"></script>
    <script src="js/portion-calculator.js"></script>
    <script src="js/ui-controller.js"></script>
    <script src="js/app.js"></script>

    <script>
        const testResults = document.getElementById('test-results');
        const loading = document.getElementById('loading');
        const finalStats = document.getElementById('final-stats');
        
        let testCount = 0;
        let passedTests = 0;
        let failedTests = 0;
        
        function addTestResult(message, type = 'info') {
            testCount++;
            if (type === 'success') passedTests++;
            if (type === 'error') failedTests++;
            
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.innerHTML = `<strong>[${testCount}]</strong> ${message}`;
            testResults.appendChild(div);
        }

        function addTestDetails(details, title = 'Details') {
            const div = document.createElement('div');
            div.innerHTML = `<strong>${title}:</strong>`;
            testResults.appendChild(div);
            
            const pre = document.createElement('pre');
            pre.textContent = JSON.stringify(details, null, 2);
            testResults.appendChild(pre);
        }

        function showFinalStats(stats) {
            finalStats.innerHTML = `
                <h2>üìä Test Results Summary</h2>
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-number">${passedTests}</div>
                        <div class="stat-label">Tests Passed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${failedTests}</div>
                        <div class="stat-label">Tests Failed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${testCount}</div>
                        <div class="stat-label">Total Tests</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">${Math.round((passedTests/testCount)*100)}%</div>
                        <div class="stat-label">Success Rate</div>
                    </div>
                </div>
            `;
            finalStats.appendChild(document.createElement('div')).innerHTML = '<h3>Application Statistics:</h3>';
            
            const pre = document.createElement('pre');
            pre.textContent = JSON.stringify(stats, null, 2);
            finalStats.appendChild(pre);
            
            finalStats.style.display = 'block';
        }

        async function runCompleteIntegrationTest() {
            try {
                loading.style.display = 'none';
                testResults.style.display = 'block';
                
                addTestResult('üöÄ Starting Complete Integration Test Suite', 'info');

                // Test 1: Environment Check
                addTestResult('üåç Checking environment and class availability', 'info');
                
                const requiredClasses = [
                    'StorageManager', 'Recipe', 'Product', 'ConsumptionResult', 'Ingredient',
                    'RecipeManager', 'PortionCalculator', 'ProductDatabase', 'UIController', 'BarcodeScanner', 'BarcodeGenerator'
                ];
                
                const classStatus = {};
                let allClassesAvailable = true;
                
                requiredClasses.forEach(className => {
                    const available = typeof window[className] !== 'undefined';
                    classStatus[className] = available;
                    if (!available) allClassesAvailable = false;
                });
                
                if (allClassesAvailable) {
                    addTestResult('‚úÖ All required classes are available', 'success');
                } else {
                    addTestResult('‚ùå Some classes are missing', 'error');
                    addTestDetails(classStatus, 'Class Availability');
                    throw new Error('Missing required classes');
                }

                // Test 2: Storage System
                addTestResult('üíæ Testing storage system', 'info');
                
                const storage = new StorageManager();
                storage.clearAll(); // Start with clean slate
                
                // Test basic storage operations
                storage.save('test-key', { message: 'Hello World', number: 42, array: [1, 2, 3] });
                const loadedData = storage.load('test-key');
                
                if (loadedData && loadedData.message === 'Hello World' && loadedData.number === 42) {
                    addTestResult('‚úÖ Storage operations working correctly', 'success');
                } else {
                    addTestResult('‚ùå Storage operations failed', 'error');
                    throw new Error('Storage test failed');
                }

                // Test 3: Data Models
                addTestResult('üèóÔ∏è Testing data models', 'info');
                
                const ingredient = new Ingredient('Test Ingredient', 100, 'TEST123');
                const recipe = new Recipe('Test Recipe', [
                    { name: 'Flour', weight: 250 },
                    { name: 'Sugar', weight: 150 },
                    { name: 'Butter', weight: 100 }
                ]);
                const product = new Product('Test Product', 'PROD456');
                
                if (recipe.totalWeight === 500 && recipe.ingredients.length === 3) {
                    addTestResult('‚úÖ Data models working correctly', 'success');
                    addTestDetails({
                        recipeName: recipe.name,
                        totalWeight: recipe.totalWeight,
                        ingredientCount: recipe.ingredients.length,
                        productName: product.name,
                        productBarcode: product.barcode
                    }, 'Data Model Test Results');
                } else {
                    addTestResult('‚ùå Data models failed', 'error');
                    throw new Error('Data model test failed');
                }

                // Test 4: Component Integration
                addTestResult('üîß Testing component integration', 'info');
                
                const recipeManager = new RecipeManager(storage);
                const calculator = new PortionCalculator();
                const productDb = new ProductDatabase(storage);
                const barcodeScanner = new BarcodeScanner();
                
                addTestResult('‚úÖ All components instantiated successfully', 'success');

                // Test 5: UI Controller (DOM-safe)
                addTestResult('üñ•Ô∏è Testing UI Controller (DOM-safe operation)', 'info');
                
                const uiController = new UIController(recipeManager, calculator, productDb, storage);
                
                // Test that UI methods work without DOM elements
                uiController.showSuccessMessage('Test success message');
                uiController.showErrorMessage('Test error message');
                uiController.updateRecipeList();
                uiController.updateRecipeSelector();
                uiController.updateEmptyStates();
                
                addTestResult('‚úÖ UI Controller working with DOM-safe operation', 'success');

                // Test 6: Recipe Management Workflow
                addTestResult('üìù Testing recipe management workflow', 'info');
                
                const testRecipe = recipeManager.createRecipe('Integration Test Cake', [
                    { name: 'Flour', weight: 300, barcode: 'FLOUR001' },
                    { name: 'Sugar', weight: 200 },
                    { name: 'Butter', weight: 150, barcode: 'BUTTER001' },
                    { name: 'Eggs', weight: 120 },
                    { name: 'Vanilla', weight: 30 }
                ]);
                
                if (testRecipe.name === 'Integration Test Cake' && testRecipe.totalWeight === 800) {
                    addTestResult('‚úÖ Recipe creation working correctly', 'success');
                    addTestDetails({
                        id: testRecipe.id,
                        name: testRecipe.name,
                        totalWeight: testRecipe.totalWeight,
                        remainingWeight: testRecipe.remainingWeight,
                        ingredientCount: testRecipe.ingredients.length
                    }, 'Created Recipe');
                } else {
                    addTestResult('‚ùå Recipe creation failed', 'error');
                    throw new Error('Recipe creation test failed');
                }

                // Test 7: Product Database Integration
                addTestResult('üè™ Testing product database integration', 'info');
                
                // Products should be automatically added from recipe creation
                const flourSearch = productDb.searchProducts('Flour');
                const butterSearch = productDb.searchProducts('Butter');
                const allProducts = productDb.getAllProducts();
                
                if (flourSearch.length > 0 && allProducts.length >= 4) {
                    addTestResult('‚úÖ Product database integration working', 'success');
                    addTestDetails({
                        flourSearchResults: flourSearch.length,
                        butterSearchResults: butterSearch.length,
                        totalProducts: allProducts.length,
                        productNames: allProducts.map(p => p.name)
                    }, 'Product Database Results');
                } else {
                    addTestResult('‚ùå Product database integration failed', 'error');
                    throw new Error('Product database integration failed');
                }

                // Test 8: Portion Calculation Engine
                addTestResult('üßÆ Testing portion calculation engine', 'info');
                
                const consumedWeight = 400; // Half of the recipe
                const portionResult = calculator.calculatePortions(testRecipe, consumedWeight);
                
                if (portionResult.consumedWeight === consumedWeight && portionResult.ingredients.length === 5) {
                    addTestResult('‚úÖ Portion calculations working correctly', 'success');
                    
                    const calculationDetails = {
                        recipeName: portionResult.recipeName,
                        consumedWeight: portionResult.consumedWeight,
                        totalIngredients: portionResult.ingredients.length,
                        ingredients: portionResult.ingredients.map(ing => ({
                            name: ing.name,
                            originalWeight: ing.originalWeight,
                            consumedWeight: ing.consumedWeight,
                            percentage: Math.round((ing.consumedWeight / ing.originalWeight) * 100),
                            barcode: ing.barcode || 'None'
                        }))
                    };
                    
                    addTestDetails(calculationDetails, 'Portion Calculation Results');
                } else {
                    addTestResult('‚ùå Portion calculation failed', 'error');
                    throw new Error('Portion calculation failed');
                }

                // Test 9: Recipe State Management
                addTestResult('üìä Testing recipe state management', 'info');
                
                recipeManager.recordConsumption(testRecipe.id, consumedWeight);
                const updatedRecipe = recipeManager.getRecipeById(testRecipe.id);
                
                if (updatedRecipe.remainingWeight === 400 && updatedRecipe.lastConsumed) {
                    addTestResult('‚úÖ Recipe state management working correctly', 'success');
                    addTestDetails({
                        originalWeight: testRecipe.totalWeight,
                        consumedWeight: consumedWeight,
                        remainingWeight: updatedRecipe.remainingWeight,
                        consumptionPercentage: updatedRecipe.getConsumptionPercentage(),
                        lastConsumed: new Date(updatedRecipe.lastConsumed).toLocaleString(),
                        isFullyConsumed: updatedRecipe.isFullyConsumed()
                    }, 'Recipe State After Consumption');
                } else {
                    addTestResult('‚ùå Recipe state management failed', 'error');
                    throw new Error('Recipe state management failed');
                }

                // Test 10: Data Validation System
                addTestResult('üîç Testing data validation system', 'info');
                
                let validationTests = 0;
                let passedValidationTests = 0;
                
                // Test recipe name validation
                const nameValidation = storage.validateRecipeName('Valid Recipe Name');
                if (nameValidation.isValid) passedValidationTests++;
                validationTests++;
                
                // Test weight validation
                const weightValidation = storage.validateWeight(150.5, 'Test Weight');
                if (weightValidation.isValid && weightValidation.value === 150.5) passedValidationTests++;
                validationTests++;
                
                // Test invalid weight validation
                const invalidWeightValidation = storage.validateWeight(-10, 'Invalid Weight');
                if (!invalidWeightValidation.isValid) passedValidationTests++;
                validationTests++;
                
                // Test barcode validation
                const barcodeValidation = storage.validateBarcode('VALID123');
                if (barcodeValidation.isValid) passedValidationTests++;
                validationTests++;
                
                if (passedValidationTests === validationTests) {
                    addTestResult('‚úÖ Data validation system working correctly', 'success');
                } else {
                    addTestResult(`‚ö†Ô∏è Data validation partially working: ${passedValidationTests}/${validationTests}`, 'warning');
                }

                // Test 11: Error Handling
                addTestResult('‚ö†Ô∏è Testing error handling', 'info');
                
                let errorTests = 0;
                let passedErrorTests = 0;
                
                // Test invalid recipe creation
                try {
                    recipeManager.createRecipe('', []);
                    errorTests++;
                } catch (error) {
                    if (error.message.includes('name') || error.message.includes('ingredient')) {
                        passedErrorTests++;
                    }
                    errorTests++;
                }
                
                // Test excessive consumption
                try {
                    calculator.calculatePortions(updatedRecipe, 10000);
                    errorTests++;
                } catch (error) {
                    if (error.message.includes('remaining') || error.message.includes('exceed')) {
                        passedErrorTests++;
                    }
                    errorTests++;
                }
                
                // Test duplicate recipe creation
                try {
                    recipeManager.createRecipe('Integration Test Cake', [{ name: 'Test', weight: 100 }]);
                    errorTests++;
                } catch (error) {
                    if (error.message.includes('already exists')) {
                        passedErrorTests++;
                    }
                    errorTests++;
                }
                
                if (passedErrorTests === errorTests) {
                    addTestResult('‚úÖ Error handling working correctly', 'success');
                } else {
                    addTestResult(`‚ö†Ô∏è Error handling partially working: ${passedErrorTests}/${errorTests}`, 'warning');
                }

                // Test 12: Complete Consumption Workflow
                addTestResult('üèÅ Testing complete consumption workflow', 'info');
                
                const finalConsumption = calculator.consumeAll(updatedRecipe);
                recipeManager.markAsFullyConsumed(testRecipe.id);
                const finalRecipe = recipeManager.getRecipeById(testRecipe.id);
                
                if (finalRecipe.isFullyConsumed() && finalRecipe.remainingWeight === 0) {
                    addTestResult('‚úÖ Complete consumption workflow working correctly', 'success');
                    addTestDetails({
                        finalConsumedWeight: finalConsumption.consumedWeight,
                        isFullyConsumed: finalRecipe.isFullyConsumed(),
                        remainingWeight: finalRecipe.remainingWeight,
                        totalConsumptionPercentage: finalRecipe.getConsumptionPercentage()
                    }, 'Final Consumption Results');
                } else {
                    addTestResult('‚ùå Complete consumption workflow failed', 'error');
                    throw new Error('Complete consumption workflow failed');
                }

                // Test 13: Recipe Copy Functionality
                addTestResult('üìã Testing recipe copy functionality', 'info');
                
                const copiedRecipe = recipeManager.copyRecipe(testRecipe.id, 'Integration Test Cake Copy');
                
                if (copiedRecipe.name === 'Integration Test Cake Copy' && 
                    copiedRecipe.totalWeight === testRecipe.totalWeight &&
                    copiedRecipe.remainingWeight === copiedRecipe.totalWeight &&
                    copiedRecipe.ingredients.length === testRecipe.ingredients.length) {
                    
                    addTestResult('‚úÖ Recipe copy functionality working correctly', 'success');
                    addTestDetails({
                        originalName: testRecipe.name,
                        copiedName: copiedRecipe.name,
                        originalTotalWeight: testRecipe.totalWeight,
                        copiedTotalWeight: copiedRecipe.totalWeight,
                        originalRemainingWeight: testRecipe.remainingWeight,
                        copiedRemainingWeight: copiedRecipe.remainingWeight,
                        ingredientCount: copiedRecipe.ingredients.length,
                        consumptionReset: copiedRecipe.remainingWeight === copiedRecipe.totalWeight
                    }, 'Recipe Copy Results');
                } else {
                    addTestResult('‚ùå Recipe copy functionality failed', 'error');
                    throw new Error('Recipe copy functionality failed');
                }

                // Test duplicate copy prevention
                try {
                    recipeManager.copyRecipe(testRecipe.id, 'Integration Test Cake Copy');
                    addTestResult('‚ùå Duplicate copy name not prevented', 'error');
                } catch (error) {
                    if (error.message.includes('already exists')) {
                        addTestResult('‚úÖ Duplicate copy name correctly prevented', 'success');
                    } else {
                        addTestResult('‚ö†Ô∏è Unexpected error in duplicate prevention', 'warning');
                    }
                }

                // Test 14: Recipe Reset Functionality
                addTestResult('üîÑ Testing recipe reset functionality', 'info');
                
                const resetRecipe = recipeManager.resetRecipe(testRecipe.id);
                
                if (resetRecipe.remainingWeight === resetRecipe.totalWeight &&
                    !resetRecipe.isFullyConsumed() &&
                    resetRecipe.lastConsumed === null) {
                    
                    addTestResult('‚úÖ Recipe reset functionality working correctly', 'success');
                    addTestDetails({
                        recipeName: resetRecipe.name,
                        totalWeight: resetRecipe.totalWeight,
                        remainingWeightAfterReset: resetRecipe.remainingWeight,
                        isFullyConsumedAfterReset: resetRecipe.isFullyConsumed(),
                        lastConsumedAfterReset: resetRecipe.lastConsumed,
                        consumptionPercentageAfterReset: resetRecipe.getConsumptionPercentage()
                    }, 'Recipe Reset Results');
                } else {
                    addTestResult('‚ùå Recipe reset functionality failed', 'error');
                    throw new Error('Recipe reset functionality failed');
                }

                // Test 15: Barcode Generator Functionality
                addTestResult('üìä Testing barcode generator functionality', 'info');
                
                const barcodeGenerator = new BarcodeGenerator();
                
                // Test basic barcode generation
                const testBarcodeText = 'TEST123';
                const generatedBarcode = barcodeGenerator.generateBarcode(testBarcodeText);
                const barcodeDataURL = barcodeGenerator.generateBarcodeDataURL(testBarcodeText);
                
                if (generatedBarcode.includes('<svg') && 
                    barcodeDataURL.startsWith('data:image/svg+xml;base64,') &&
                    barcodeGenerator.isValidBarcodeText(testBarcodeText)) {
                    
                    addTestResult('‚úÖ Barcode generator functionality working correctly', 'success');
                    addTestDetails({
                        testText: testBarcodeText,
                        svgGenerated: generatedBarcode.includes('<svg'),
                        dataUrlGenerated: barcodeDataURL.startsWith('data:image/svg+xml;base64,'),
                        validationWorking: barcodeGenerator.isValidBarcodeText(testBarcodeText),
                        supportedCharacters: barcodeGenerator.getSupportedCharacters(),
                        invalidTextRejected: !barcodeGenerator.isValidBarcodeText('')
                    }, 'Barcode Generator Results');
                } else {
                    addTestResult('‚ùå Barcode generator functionality failed', 'error');
                    throw new Error('Barcode generator functionality failed');
                }

                // Test 16: UI Controller New Methods
                addTestResult('üñ•Ô∏è Testing UI Controller new methods', 'info');
                
                if (typeof uiController.copyRecipe === 'function' && 
                    typeof uiController.resetRecipe === 'function') {
                    
                    addTestResult('‚úÖ UI Controller new methods available', 'success');
                    addTestDetails({
                        copyMethodExists: typeof uiController.copyRecipe === 'function',
                        resetMethodExists: typeof uiController.resetRecipe === 'function',
                        toggleIngredientsExists: typeof uiController.toggleRecipeIngredients === 'function',
                        showBarcodeModalExists: typeof uiController.showBarcodeModal === 'function'
                    }, 'UI Controller Method Availability');
                } else {
                    addTestResult('‚ùå UI Controller new methods missing', 'error');
                    throw new Error('UI Controller new methods missing');
                }

                // Test 13: Multi-Recipe Management
                addTestResult('üìö Testing multi-recipe management', 'info');
                
                const recipe2 = recipeManager.createRecipe('Vanilla Cookies', [
                    { name: 'Flour', weight: 400 },
                    { name: 'Butter', weight: 250 },
                    { name: 'Sugar', weight: 150 },
                    { name: 'Vanilla Extract', weight: 20 }
                ]);
                
                const recipe3 = recipeManager.createRecipe('Fruit Salad', [
                    { name: 'Apples', weight: 300 },
                    { name: 'Bananas', weight: 200 },
                    { name: 'Oranges', weight: 250 }
                ]);
                
                const allRecipes = recipeManager.getAllRecipes();
                const activeRecipes = recipeManager.getActiveRecipes();
                const completedRecipes = recipeManager.getCompletedRecipes();
                
                if (allRecipes.length === 3 && activeRecipes.length === 2 && completedRecipes.length === 1) {
                    addTestResult('‚úÖ Multi-recipe management working correctly', 'success');
                    addTestDetails({
                        totalRecipes: allRecipes.length,
                        activeRecipes: activeRecipes.length,
                        completedRecipes: completedRecipes.length,
                        recipeNames: allRecipes.map(r => r.name)
                    }, 'Recipe Management Summary');
                } else {
                    addTestResult('‚ùå Multi-recipe management failed', 'error');
                    throw new Error('Multi-recipe management failed');
                }

                // Test 14: Barcode Scanner Integration
                addTestResult('üì∑ Testing barcode scanner integration', 'info');
                
                const scannerStatus = barcodeScanner.getStatus();
                addTestResult(`‚úÖ Barcode scanner integration checked (supported: ${scannerStatus.isSupported})`, 'success');
                addTestDetails(scannerStatus, 'Barcode Scanner Status');

                // Test 15: Search and Filter Functionality
                addTestResult('üîç Testing search and filter functionality', 'info');
                
                const cakeSearch = recipeManager.searchRecipes('Cake');
                const cookieSearch = recipeManager.searchRecipes('Cookie');
                const flourProductSearch = productDb.searchProducts('Flour');
                
                if (cakeSearch.length >= 1 && cookieSearch.length >= 1 && flourProductSearch.length >= 1) {
                    addTestResult('‚úÖ Search and filter functionality working correctly', 'success');
                    addTestDetails({
                        cakeSearchResults: cakeSearch.length,
                        cookieSearchResults: cookieSearch.length,
                        flourProductResults: flourProductSearch.length
                    }, 'Search Results');
                } else {
                    addTestResult('‚ùå Search and filter functionality failed', 'error');
                    throw new Error('Search functionality failed');
                }

                // Final Summary
                addTestResult('üéâ Integration Test Suite Completed Successfully!', 'success');
                
                const finalAppStats = {
                    recipes: {
                        total: recipeManager.getAllRecipes().length,
                        active: recipeManager.getActiveRecipes().length,
                        completed: recipeManager.getCompletedRecipes().length,
                        storageStats: recipeManager.getStorageStats()
                    },
                    products: {
                        total: productDb.getAllProducts().length,
                        stats: productDb.getStats()
                    },
                    storage: storage.getStorageInfo(),
                    scanner: {
                        supported: barcodeScanner.isSupported,
                        status: barcodeScanner.getStatus()
                    },
                    environment: {
                        protocol: location.protocol,
                        userAgent: navigator.userAgent.substring(0, 50) + '...',
                        serviceWorkerSupported: 'serviceWorker' in navigator
                    }
                };
                
                // Cleanup
                storage.clearAll();
                addTestResult('üßπ Test data cleaned up successfully', 'success');
                
                showFinalStats(finalAppStats);
                
            } catch (error) {
                addTestResult('üí• Integration test failed: ' + error.message, 'error');
                console.error('Integration test error:', error);
                
                const errorStats = {
                    error: error.message,
                    stack: error.stack,
                    testsPassed: passedTests,
                    testsFailed: failedTests,
                    totalTests: testCount
                };
                
                showFinalStats(errorStats);
            }
        }

        // Wait for DOM and all scripts to load
        document.addEventListener('DOMContentLoaded', () => {
            // Add sufficient delay to ensure all scripts have loaded and executed
            setTimeout(runCompleteIntegrationTest, 500);
        });
    </script>
</body>
</html>